(function(e){jQuery.browser={};jQuery.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase());jQuery.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase());jQuery.browser.opera=/opera/.test(navigator.userAgent.toLowerCase());jQuery.browser.msie=/msie/.test(navigator.userAgent.toLowerCase());if(!Array.prototype.indexOf){Array.prototype.indexOf=function(e){var t=this.length>>>0;var n=Number(arguments[1])||0;n=n<0?Math.ceil(n):Math.floor(n);if(n<0)n+=t;for(;n<t;n++){if(n in this&&this[n]===e)return n}return-1}}var t=[];var n=[];var r=0;var i=false;var s="";var o="";var u="";var a="";var f="";var l=0;var c=0;var h={onComplete:function(){},backgroundColor:"#000",barColor:"#fff",overlayId:"qLoverlay",barHeight:1,percentage:false,deepSearch:true,completeAnimation:"fade",minimumTime:500,onLoadComplete:function(){if(h.completeAnimation=="grow"){var t=500;var n=new Date;if(n.getTime()-c<h.minimumTime){t=h.minimumTime-(n.getTime()-c)}e(a).stop().animate({width:"100%"},t,function(){e(this).animate({top:"0%",width:"100%",height:"100%"},500,function(){e("#"+h.overlayId).fadeOut(500,function(){e(this).remove();h.onComplete()})})})}else{e("#"+h.overlayId).fadeOut(500,function(){e("#"+h.overlayId).remove();h.onComplete()})}}};var p=function(e){s=e;i=false;var n=new Date;c=n.getTime();if(t.length>0){d();b()}else{y()}};var d=function(){o=e("<div></div>").appendTo("body").css({display:"none",width:0,height:0,overflow:"hidden"});for(var t=0;n.length>t;t++){e.ajax({url:n[t],type:"HEAD",complete:function(e){if(!i){v(this["url"])}}})}};var v=function(t){var n=e("<img />").attr("src",t).appendTo(o);m(n)};var m=function(e){l++;e.imagesLoaded(e,function(){g()})};var g=function(){r++;var t=r/l*100;e(a).stop().animate({width:t+"%",minWidth:t+"%"},200);if(h.percentage==true){e(f).text(Math.ceil(t)+"%")}if(r==l){y()}};var y=function(){e(o).remove();i=true;h.onLoadComplete()};var b=function(){var n="absolute";if(s.prop("tagName")=="BODY"){n="fixed"}else{s.css("position","relative")}u=e("<div id='"+h.overlayId+"'></div>").css({width:"100%",height:"100%",backgroundColor:h.backgroundColor,backgroundPosition:"fixed",position:n,zIndex:666999,top:0,left:0}).appendTo(s);a=e("<div id='qLbar'></div>").css({height:"30px",marginTop:"42px",width:"0%",position:"absolute"}).appendTo(u);if(h.percentage==true){f=e("<div id='qLpercentage'></div>").text("0%").css({position:"absolute",bottom:"10px",right:"10px",textAlign:"center"}).appendTo(u)}if(!t.length){y()}};var w=function(r){var i="";var s=e(r);var o="normal";if(s.css("background-image")!="none"){var i=s.css("background-image");var o="background"}else if(typeof s.attr("src")!="undefined"&&r.nodeName.toLowerCase()=="img"){var i=s.attr("src")}if(i.indexOf("gradient")==-1){i=i.replace(/url\(\"/g,"");i=i.replace(/url\(/g,"");i=i.replace(/\"\)/g,"");i=i.replace(/\)/g,"");var u=i.split(", ");for(var a=0;a<u.length;a++){if(u[a].length>0&&t.indexOf(u[a])==-1&&!u[a].match(/^(data:)/i)){var f="";if(e.browser.msie&&e.browser.version<9){f="?"+Math.floor(Math.random()*3e3);n.push(u[a]+f);t.push(u[a])}else{t.push(u[a]);if(o=="background"){n.push(u[a]+f)}else{m(s)}}}}}};e.fn.queryLoader2=function(t){if(t){e.extend(h,t)}this.each(function(){w(this);if(h.deepSearch==true){e(this).find("*:not(script)").each(function(){w(this)})}});p(this);return this};var E={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(e){for(var t=0;t<e.length;t++){var n=e[t].string;var r=e[t].prop;this.versionSearchString=e[t].versionSearch||e[t].identity;if(n){if(n.indexOf(e[t].subString)!=-1)return e[t].identity}else if(r)return e[t].identity}},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);if(t==-1)return;return parseFloat(e.substring(t+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};E.init();jQuery.browser.version=E.version})(jQuery)